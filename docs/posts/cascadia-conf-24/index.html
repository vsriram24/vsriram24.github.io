<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Home - Cascadia Conf 2024</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../vivek_cropped.JPG" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Home</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About Me</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">[VS]Codes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html"> 
<span class="menu-text">Teaching and Mentorship</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../conferences.html"> 
<span class="menu-text">Presentations and Talks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Cascadia Conf 2024</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#keynote" id="toc-keynote" class="nav-link active" data-scroll-target="#keynote">Keynote</a></li>
  <li><a href="#r-workflows-in-azure-machine-learning-for-athletic-data-analysis---emmily-kraschel" id="toc-r-workflows-in-azure-machine-learning-for-athletic-data-analysis---emmily-kraschel" class="nav-link" data-scroll-target="#r-workflows-in-azure-machine-learning-for-athletic-data-analysis---emmily-kraschel">R Workflows in Azure Machine Learning for Athletic Data Analysis - Emmily Kraschel</a></li>
  <li><a href="#fair-ml---simon-couch" id="toc-fair-ml---simon-couch" class="nav-link" data-scroll-target="#fair-ml---simon-couch">Fair ML - Simon Couch</a></li>
  <li><a href="#how-to-make-a-thousand-plots-look-good-data-viz-tips-for-parameterized-reporting" id="toc-how-to-make-a-thousand-plots-look-good-data-viz-tips-for-parameterized-reporting" class="nav-link" data-scroll-target="#how-to-make-a-thousand-plots-look-good-data-viz-tips-for-parameterized-reporting">How to make a Thousand Plots Look Good: Data Viz Tips for Parameterized Reporting</a></li>
  <li><a href="#cartographic-tricks-and-techniques-in-r" id="toc-cartographic-tricks-and-techniques-in-r" class="nav-link" data-scroll-target="#cartographic-tricks-and-techniques-in-r">Cartographic Tricks and Techniques in R</a></li>
  <li><a href="#dont-repeat-yourself-templatize-shiny-apps-with-modules" id="toc-dont-repeat-yourself-templatize-shiny-apps-with-modules" class="nav-link" data-scroll-target="#dont-repeat-yourself-templatize-shiny-apps-with-modules">Dont repeat yourself: templatize Shiny apps with Modules</a></li>
  <li><a href="#high-level-module-based-shiny-apps-with-teal" id="toc-high-level-module-based-shiny-apps-with-teal" class="nav-link" data-scroll-target="#high-level-module-based-shiny-apps-with-teal">High-level, module-based Shiny apps with ‘Teal’</a></li>
  <li><a href="#mat-bayly" id="toc-mat-bayly" class="nav-link" data-scroll-target="#mat-bayly">Mat Bayly</a></li>
  <li><a href="#jackie-nolless" id="toc-jackie-nolless" class="nav-link" data-scroll-target="#jackie-nolless">Jackie Nolless</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Welcome back to another week of [VS]Codes! A few weeks ago, I had the opportunity to attend Cascadia Conf 2024, a local R-focused conference for the data science community of the Pacific Northwest. It was a great experience getting to see so many different applications of data science across a variety of industries, and I enjoyed the experience of getting to connect with other data sciences in the PNW area. Here is a summary of the talks I attended from that day.</p>
<section id="keynote" class="level2">
<h2 class="anchored" data-anchor-id="keynote">Keynote</h2>
<p>“Why is everybody talking about Generative AI” - Deepsha Menghani</p>
<p>Gen AI: a type of AI that can create new content based on patterns it has learned from existing data</p>
<p>Human intervention - reinforcing what is okay and what isn’t</p>
<p>e.g.&nbsp;Cascadia Agent Bot - gave LLM the data from the Cascadia agenda</p>
<p>Gen AI becomes powerful when you make it work for you</p>
<p>Matrix of Gen AI scenarios: Direct - prompt to response customized - prompt to data to response commercial - prompt to deccision making to data to actions to outcome to feedback back to decision making</p>
<p>e.g.&nbsp;finance Direct - financial literacy Customized - budget and tax optimization Commercial - fraud detection</p>
<p>e.g.&nbsp;healthcare Direct - health routien development Customized - fitness/health data summarization Commercial - medical image processing</p>
<p>e.g.&nbsp;education Direct - conceptual understanding Customized - personalized study plan (e.g.&nbsp;story about chickens vs 3-1=2) Commercial - reasoning and content generation (e.g.&nbsp;khanmigo bot for Khan academy) - safe space to go back and forth while learning something - teacher mode: suggesting how to teach</p>
<p>e.g.&nbsp;you direct - code assistance/copilot - turn commenting into code (GitHub Copilot / chattr) - synthetic data generation Customized - readme/documentation generator - returning consistent readme structure/doocumentation Commercial - Shiny application support bot - feed documentation into bot that will be at the bottom of your web app. helps users when they want to use your dashboard</p>
<p>The Good - knowledge accessibility, personalization, creativity, efficiency</p>
<p>The Bad - garbage in/out, privacy, dependency, hallucination, misinformation</p>
<p>The Ugly - bias, resource intesinve, cost, ethical dilemma, evolving regulations</p>
<p>It’s more and more important to have good, comprehensive documentation (i.e.&nbsp;training data).</p>
<p>When you have a hammer, everything looks like a nail. - Don’t think gen AI is the only tool think about the impact you want!</p>
<p>Questions - how to pick the right LLM? Go with accessbility, cost, data privacy - how to evaluate output? Evaluation is such an evolving field. Different models can check for different things (e.g.&nbsp;no swear words). Human evaluation also - what is impact on jobs of ppl like us? ppl who use AI to advance their work will do better. Up-leveling from nitty-gritty to strategy. Some jobs you will be able to advance using AI. Other jobs may not be useful. Employers should train their employees in terms of how they can use it in their jobs</p>
</section>
<section id="r-workflows-in-azure-machine-learning-for-athletic-data-analysis---emmily-kraschel" class="level2">
<h2 class="anchored" data-anchor-id="r-workflows-in-azure-machine-learning-for-athletic-data-analysis---emmily-kraschel">R Workflows in Azure Machine Learning for Athletic Data Analysis - Emmily Kraschel</h2>
<p>sportsworking fast - data collection is live, daily, weekly, and longer - storage - basic analysis and reporting - decision making</p>
<p>conflicts with the slow work of data science - data cleaning - in-depth reports and aggregation - advanced analysis - connecting the dots</p>
<p>conflicting needs: - changing data, constant additions, too many versions - bottlenecks and stopping points - lack of controlled experiments</p>
<p>old framework: - automated reports via dashboard. good for fast, bad for slow… - what do we put on the dashboard? new metrics? - no central source for raw instrument data - variety of IDs from different instrument interfaces - data in different versions, different places, different files - CSV creation and pull was slow, too many CSVs…</p>
<p>new framework goals: - improve outcomes (more complete, valid, actionable data) - - lower barriers to more complex data science and analytics - aggregate data in a single place, unify player IDs - more compute power – ability to collaborate and compute easier - fewer bottlenecks - duplication, updates, incomplete data, etc.</p>
<p>Azure ML - analysis in jupyter notebooks - configurable compute - running job pipelines - loading and storing data - data security</p>
<p>still have automated dashboard for day-to-day - better for slow work, ability to step back from constant stream of data - able to pull from all instrument APIs - easier data merging - easier to maintain most recent version of data, quicker due to higher computing power - centralized data storage</p>
<p>e.g.&nbsp;- hamstring injury predictability - discrete time survival models - differences across genders - jump height by rate of force development (squatting and jumping) by gender</p>
</section>
<section id="fair-ml---simon-couch" class="level2">
<h2 class="anchored" data-anchor-id="fair-ml---simon-couch">Fair ML - Simon Couch</h2>
<ul>
<li><a href="https://github.com/simonpcouch/cascadia-24" class="uri">https://github.com/simonpcouch/cascadia-24</a></li>
<li>predicted vs actual vase weight - it’s a bad model, but not an UNFAIR model</li>
<li>same dist for home values. This is a bad model, and we’d say it’s unfair b/c we’re taxing unfairly</li>
</ul>
<p>Fairness is not just about statistical behavior - fairness is about our beliefs</p>
<p>tidymodels, rsample, recipes, parsnip, Tune, yardstick - software to support fair ML</p>
<p>Defining fairness… - this is really hard! Translation of values into mathematical measures</p>
<p>Proposal: the most “performant” model is the most fair model - by R^2 / RSME - apply a statistcal technique called ‘calibration’ to get errors independently and identically distribution - error percentage matters too…</p>
<p>New proposal: similar percentage error is most fair - more “fair” but “worse” model performance</p>
<p>Definitions of fairness are not mathematically or morally compatible in general - Mitchell et al 2021</p>
<p>The whole system - how will predictions be used at the end of the day? - metrics evaluate the model, but the model is just one part of a larger system</p>
<p>the hard parts - articulating what fairness means to your (or stakeholders) in a problem context - choosing a mathematical measure of fairness that speask to that meaning - situating the resulting measure in the whole system</p>
<p>Choose tools that help you think about the hard parts</p>
<p>tmwr.org tidymodels.org</p>
<p>Questions: - structured way to get stakeholders involved? model cards - couple paragraphs of the context for how the data arose and the techniques used to model the data. can be done with the vetiver package</p>
</section>
<section id="how-to-make-a-thousand-plots-look-good-data-viz-tips-for-parameterized-reporting" class="level2">
<h2 class="anchored" data-anchor-id="how-to-make-a-thousand-plots-look-good-data-viz-tips-for-parameterized-reporting">How to make a Thousand Plots Look Good: Data Viz Tips for Parameterized Reporting</h2>
<p><a href="https://cascadia2024.rfortherestofus.com/#/title-slide" class="uri">https://cascadia2024.rfortherestofus.com/#/title-slide</a></p>
<ul>
<li>R for the Rest of Us: teaching how to use R, consulting services as well</li>
</ul>
<p>Parameterized Reporting: make a single doc in markdown/Quarto and make multiple reports at once e.g.&nbsp;data visualization templates for housing/demographics across different towns/counties/countries.</p>
<p>How to think about data viz in the context of parameterized reporting?</p>
<ol type="1">
<li>There is no magic package</li>
<li>Consider the outer limits of your data</li>
</ol>
<ul>
<li>e.g.&nbsp;scale of income</li>
</ul>
<ol start="3" type="1">
<li>Minimze text and position it carefully</li>
<li>Don’t label everything</li>
</ol>
<ul>
<li>ggrepel: repel overlapping labels in ggplot</li>
<li>shadowtext: background color to text</li>
</ul>
<ol start="5" type="1">
<li>Hide small values</li>
<li>Don’t put text where it could be obscured</li>
</ol>
<ul>
<li>add text elements as multiple layers, include elemnt for text position</li>
</ul>
<ol start="7" type="1">
<li>Highlight strategically</li>
</ol>
<ul>
<li>color, size, shadow, outline, opacity</li>
<li>ggfx</li>
</ul>
<p>Packages are helpers, but you are the one who has to do the thinking</p>
</section>
<section id="cartographic-tricks-and-techniques-in-r" class="level2">
<h2 class="anchored" data-anchor-id="cartographic-tricks-and-techniques-in-r">Cartographic Tricks and Techniques in R</h2>
<p>Justin Sherrill</p>
<p>ECOnorthwest - consulting service - data visualization, housing and demographic analysis</p>
<p>Keep it in {ggplot2}! One of the strongest dataviz tools in existence. Sometimes {sf}</p>
<p>What is “good” cartography? - visual hierarchy, legibility, figure-ground, balance</p>
<p>writing a good story is about making decisions, i.e.&nbsp;making the right sacrifices</p>
<p>Jacques Bertin, William Bunge, Timo Grossenbacher - great cartographers - <a href="https://timogrossenbacher.ch/bivariate-maps-with-ggplot2-and-sf/" class="uri">https://timogrossenbacher.ch/bivariate-maps-with-ggplot2-and-sf/</a> - <a href="https://geo.wa.gov" class="uri">https://geo.wa.gov</a></p>
<p>{ggspatial} - including north arrow / scale bar</p>
<p>{mapboxapi} - can show roads, bodies of water, etc.</p>
<p>position your legend inside the map, especially if you have a lot of white space</p>
<p>{patchwork} - can do map insets to show larger context of your zoomed in map - can also use {ggmagnify}</p>
<p>{ggrepel} - label placement</p>
<p>{st_inscribed_circle} - label an unusually shaped polygon</p>
<p>{ggforce} - label a subset of points in a nice style</p>
<p>{ggfx} - fun effects</p>
<p>{ggdensity} - show patterns</p>
<p>{rmapshaper} - simplify geometries of shapes</p>
<p>{smoothr} - rounded corners for shapes</p>
<p>{ggarrow} - nice loking arrows {ggstar} - pch symbols {ggsvg} - use SVGs as points in your plot</p>
<p>Question: dealing with large data? - {mapview} to look at things beforehand - {rmapshaper} can reduce draw time and simplify runtime - chunk things into smaller groups</p>
</section>
<section id="dont-repeat-yourself-templatize-shiny-apps-with-modules" class="level2">
<h2 class="anchored" data-anchor-id="dont-repeat-yourself-templatize-shiny-apps-with-modules">Dont repeat yourself: templatize Shiny apps with Modules</h2>
<p>Erica Bishop</p>
<p>Environmental data science with GSI Environmental</p>
<p>Why build a template? - balance customization needs with out-of-the-box tools - maintainable as a small team - easy for other R-coders to use without extra training - minimize overhead cost and time</p>
<p>bslib theming</p>
<p>Modularity is the most important pre-requisite - instead of having your UI and server together, have each function as its own function</p>
<p>Rhino is our framework of choice because it handles: - apps that scale up - modular structure - consistency across every app - version control (with renv)</p>
<p>Consistent coding practices matter: - reactive variable naming conventions - clean code structure -file naming to follow the rhino structure.</p>
<p>Bottom line: a tamplate is a lightweight workflow for saving time and improving collaboration on R Shiny app development</p>
</section>
<section id="high-level-module-based-shiny-apps-with-teal" class="level2">
<h2 class="anchored" data-anchor-id="high-level-module-based-shiny-apps-with-teal">High-level, module-based Shiny apps with ‘Teal’</h2>
<ul>
<li>Dror Berel, statistical consultant</li>
</ul>
<p>unnecessary data wrangling - join subject-level with non-subject level data, causing redundancy - unnecessary pre-calculated metrics for all possible combos of covariates/groups</p>
<p>not using functions, modules</p>
<p>scope creep: too many ad-hoc patches to handle edge cases</p>
<p>Shiny Module: a pair of UI and server functions</p>
<p>Check out Bioconductor, Pharmaverse</p>
</section>
<section id="mat-bayly" class="level2">
<h2 class="anchored" data-anchor-id="mat-bayly">Mat Bayly</h2>
<p>quantitative biologist mjbayly.com</p>
<p>Why worry about organizational structures and systems in R?</p>
<p>github.com/essatech/CEMPRA</p>
<p>Separation of concerns: - R package – biology and core data processing - R Shiny app – user activity, reactive objects, and app templating</p>
<p>‘roxygen2’ tags for function/documentation</p>
<p><a href="https://r-pkgs.com" class="uri">https://r-pkgs.com</a></p>
<p>Folder with r functions, inst, tests, description</p>
<p>Mohsen Soltanifar - ClinChoice / Northeastern</p>
</section>
<section id="jackie-nolless" class="level2">
<h2 class="anchored" data-anchor-id="jackie-nolless">Jackie Nolless</h2>
<p>I had a dream that I could write code and share it with others</p>
<p>Maybe you want to host: - shiny dashboard plumber API where engineers can pass data to without editing code themselves - arbitrary script that runs on a fixed schedule</p>
<p>this is all different from “i want colleagues to run my R scripts”</p>
<p>Making your code run somewhere else</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/vsriram24\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Powered by <a href="https://quarto.org">Quarto</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>